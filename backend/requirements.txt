# InvestIQ Backend Requirements

# Django & DRF (assumptions admin app)
Django>=5.0,<6.0
djangorestframework>=3.14,<4.0
psycopg[binary]>=3.1  # Django PostgreSQL adapter (sync)

# Core
fastapi==0.109.0
email-validator==2.1.0
uvicorn[standard]==0.27.0
pydantic==2.5.3
pydantic-settings==2.1.0

# HTTP Client
httpx==0.26.0

# Security (minimal)
python-multipart==0.0.6

# Utilities
python-dotenv==1.0.0

# ===========================================
# NEW: Database & ORM
# ===========================================
sqlalchemy[asyncio]==2.0.25
alembic==1.13.1
# Using psycopg3 instead of asyncpg - better SSL/connection handling
# binary = bundled libpq, pool = async connection pooling
psycopg[binary,pool]==3.1.18

# ===========================================
# NEW: Authentication & Security
# ===========================================
passlib==1.7.4
bcrypt==4.0.1
python-jose[cryptography]==3.3.0
pyotp==2.9.0
qrcode[pil]==7.4.2
zxcvbn-python==4.4.24

# ===========================================
# NEW: File Storage & Reports (Phase 5-6)
# ===========================================
boto3==1.34.0
reportlab==4.0.9
openpyxl==3.1.2
Pillow==10.2.0

# ===========================================
# PDF Export (Optional - requires system libs)
# ===========================================
# WeasyPrint requires Cairo, Pango, and GDK-PixBuf
# On macOS: brew install cairo pango gdk-pixbuf libffi
# On Ubuntu: apt-get install libcairo2 libpango-1.0-0 libgdk-pixbuf2.0-0
weasyprint==62.0

# ===========================================
# NEW: Email (Phase 7)
# ===========================================
resend==0.7.0

# ===========================================
# NEW: Billing (Phase 8)
# ===========================================
stripe==7.0.0

# ===========================================
# Redis (rate limiting, token blacklist, caching)
# ===========================================
redis[hiredis]>=5.0,<6.0

# ===========================================
# Observability (Production Readiness)
# ===========================================
sentry-sdk[fastapi]==1.40.0
prometheus-fastapi-instrumentator==7.0.2
python-json-logger==2.0.7

# ===========================================
# Testing
# ===========================================
pytest==8.0.0
pytest-asyncio==0.23.3
pytest-cov==4.1.0
aiosqlite==0.19.0  # Async SQLite for testing
httpx==0.26.0      # TestClient async support

# ===========================================
# Load Testing (optional â€” install separately)
# ===========================================
# locust==2.24.0
