# ===========================================
# DealGapIQ Backend Environment Configuration
# ===========================================
# Copy this file to .env and fill in your values.
# Lines starting with # are comments.
# 
# REQUIRED variables are marked with [REQUIRED]
# PRODUCTION variables must be set in production [PROD]

# ===========================================
# Application Settings
# ===========================================
APP_NAME=DealGapIQ
APP_VERSION=1.0.0
DEBUG=false
# Environment: development, staging, production
ENVIRONMENT=development

# ===========================================
# Security [REQUIRED] [PROD]
# ===========================================
# CRITICAL: Generate a strong secret key for JWT tokens
# Generate with: openssl rand -hex 32
# Must be at least 32 characters
SECRET_KEY=

# JWT Configuration
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7

# Password Reset
PASSWORD_RESET_TOKEN_EXPIRE_HOURS=1
EMAIL_VERIFICATION_TOKEN_EXPIRE_HOURS=48

# Cookie settings for httpOnly auth cookies
# COOKIE_SECURE is auto-disabled in non-production environments (no HTTPS).
# Set to true in production (requires HTTPS).
COOKIE_SECURE=true
# Options: lax, strict, none
# Use "none" when frontend and backend are on different domains (cross-site).
# Use "lax" if they share a domain (e.g. api.dealgapiq.com + dealgapiq.com).
COOKIE_SAMESITE=none
# Set for cross-subdomain cookies (e.g. .dealgapiq.com). Leave empty for default.
COOKIE_DOMAIN=

# ===========================================
# Database [REQUIRED]
# ===========================================
# PostgreSQL connection URL
# Format: postgresql://user:password@host:port/database
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/dealgapiq

# Connection pool settings (for non-serverless deployments)
DB_POOL_SIZE=5
DB_MAX_OVERFLOW=10
DB_POOL_TIMEOUT=30

# ===========================================
# Redis (Optional - for caching)
# ===========================================
REDIS_URL=redis://localhost:6379/0

# ===========================================
# External APIs [REQUIRED for property data]
# ===========================================
# RentCast API for property data
# Get your key at: https://app.rentcast.io/app/api
RENTCAST_API_KEY=
RENTCAST_URL=https://api.rentcast.io/v1

# AXESSO API for Zillow data
# Get your key at: https://axesso.developer.azure-api.net
AXESSO_API_KEY=
AXESSO_URL=https://api.axesso.de/zil

# ===========================================
# File Storage
# ===========================================
# Options: local, s3, r2
STORAGE_BACKEND=local
LOCAL_STORAGE_PATH=./uploads

# AWS S3 Settings (if STORAGE_BACKEND=s3)
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_REGION=us-east-1
S3_BUCKET_NAME=dealgapiq-documents
# For Cloudflare R2, set endpoint URL
S3_ENDPOINT_URL=

# Cloudflare R2 Settings (if STORAGE_BACKEND=r2)
R2_ACCOUNT_ID=
R2_ACCESS_KEY_ID=
R2_SECRET_ACCESS_KEY=
R2_BUCKET_NAME=dealgapiq-documents
R2_PUBLIC_URL=

# File upload limits
MAX_UPLOAD_SIZE_MB=50
ALLOWED_FILE_TYPES=pdf,doc,docx,xls,xlsx,jpg,jpeg,png,gif,webp

# ===========================================
# Email (Resend)
# ===========================================
# Get your API key at: https://resend.com
RESEND_API_KEY=
EMAIL_FROM=noreply@dealgapiq.com
EMAIL_FROM_NAME=DealGapIQ
FRONTEND_URL=http://localhost:3000

# ===========================================
# Stripe Billing [PROD]
# ===========================================
# Get your keys at: https://dashboard.stripe.com/apikeys
STRIPE_SECRET_KEY=
STRIPE_PUBLISHABLE_KEY=
# Webhook secret from: https://dashboard.stripe.com/webhooks
STRIPE_WEBHOOK_SECRET=

# Price IDs (create in Stripe Dashboard)
STRIPE_PRICE_STARTER_MONTHLY=
STRIPE_PRICE_STARTER_YEARLY=
STRIPE_PRICE_PRO_MONTHLY=
STRIPE_PRICE_PRO_YEARLY=
STRIPE_PRICE_ENTERPRISE_MONTHLY=
STRIPE_PRICE_ENTERPRISE_YEARLY=

# ===========================================
# Rate Limiting
# ===========================================
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_PERIOD=60

# Auth rate limits (more restrictive)
AUTH_RATE_LIMIT_REQUESTS=5
AUTH_RATE_LIMIT_PERIOD=60

# ===========================================
# CORS
# ===========================================
# Comma-separated list of allowed origins
CORS_ORIGINS_STR=https://dealgapiq.com,https://www.dealgapiq.com,http://localhost:3000,http://127.0.0.1:3000

# ===========================================
# Feature Flags
# ===========================================
FEATURE_AUTH_REQUIRED=false
FEATURE_DASHBOARD_ENABLED=true
FEATURE_DOCUMENT_UPLOAD_ENABLED=true
FEATURE_SHARING_ENABLED=true
FEATURE_EMAIL_VERIFICATION_REQUIRED=false
